<form [formGroup]="form" (ngSubmit)="submitForm()">
  <div *ngFor="let field of fields">
    <label [for]="field.name">{{field.label}}</label>
    <div [ngSwitch]="field.type">
      <input *ngSwitchCase="'text'" type="text" [id]="field.name" [formControlName]="field.name">
      <input *ngSwitchCase="'email'" type="email" [id]="field.name" [formControlName]="field.name">
      <textarea *ngSwitchCase="'textarea'" [id]="field.name" [formControlName]="field.name"></textarea>
      <select *ngSwitchCase="'select'" [id]="field.name" [formControlName]="field.name">
        <option *ngFor="let option of field.options" [value]="option.value">{{option.label}}</option>
      </select>
    </div>
  </div>
  <button [disabled]="form.invalid" type="submit">Submit</button>
</form>